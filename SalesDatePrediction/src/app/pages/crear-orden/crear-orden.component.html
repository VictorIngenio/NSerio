<div class="bg-success text-white py-2 ps-2">
    <mat-label>{{ customerName }} - New Order</mat-label>
</div>
<form [formGroup]="formulario" class="m-4" (ngSubmit)="guardar()">
  <div>
      <h4>Order</h4>
  </div>
  <div>
      <mat-form-field appearance="fill" class="me-3 col-md-3">
        <mat-label>Employee</mat-label>
        <mat-select formControlName="EmpId" ngDefaultControl>
          @for (emp of empleados; track emp) {
            <mat-option [value]="emp.empid">{{emp.fullName}}</mat-option>
          }
        </mat-select>
        <mat-error *ngIf="formulario.controls['EmpId'].invalid">
          El empleado es requerido.
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="ms-3 col-md-3">
        <mat-label>Shipper</mat-label>
        <mat-select formControlName="ShipperId" ngDefaultControl>
          @for (shp of transportistas; track shp) {
            <mat-option [value]="shp.shipperid">{{shp.companyname}}</mat-option>
          }
        </mat-select>
        <mat-error *ngIf="formulario.controls['ShipperId'].invalid">
          El transportista es requerido.
        </mat-error>
      </mat-form-field>
  </div>
  <div>
      <mat-form-field appearance="fill" class="col-md-7">
        <mat-label>Ship Name</mat-label>
        <input matInput formControlName="ShipName" ngDefaultControl>
        <mat-error *ngIf="formulario.controls['ShipName'].invalid">
          El nombre es requerido.
        </mat-error>
      </mat-form-field>
  </div>
  <div>
      <mat-form-field appearance="fill" class="me-2">
        <mat-label>Ship Address</mat-label>
        <input matInput formControlName="ShipAddress" ngDefaultControl>
        <mat-error *ngIf="formulario.controls['ShipAddress'].invalid">
          La dirección es requerida.
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="mx-2">
        <mat-label>Ship City</mat-label>
        <input matInput formControlName="ShipCity" ngDefaultControl>
        <mat-error *ngIf="formulario.controls['ShipCity'].invalid">
          La ciudad es requerida
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="ms-2">
        <mat-label>Ship Country</mat-label>
        <input matInput formControlName="ShipCountry" ngDefaultControl>
        <mat-error *ngIf="formulario.controls['ShipCountry'].invalid">
          El país es requerido.
        </mat-error>
      </mat-form-field>
  </div>
  <div>
      <mat-form-field class="me-2">
          <mat-label>Order Date</mat-label>
          <input matInput [matDatepicker]="orderDatePicker" formControlName="OrderDate" ngDefaultControl>
          <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
          <mat-datepicker-toggle matIconSuffix [for]="orderDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #orderDatePicker></mat-datepicker>
          <mat-error *ngIf="formulario.controls['OrderDate'].invalid">
            La fecha de la orden es requerida.
          </mat-error>
      </mat-form-field>
      <mat-form-field class="mx-2">
          <mat-label>Required Date</mat-label>
          <input matInput [matDatepicker]="requiredDatePicker" formControlName="RequiredDate" ngDefaultControl>
          <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
          <mat-datepicker-toggle matIconSuffix [for]="requiredDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #requiredDatePicker></mat-datepicker>
          <mat-error *ngIf="formulario.controls['RequiredDate'].invalid">
            Esta fecha es requerida.
          </mat-error>
      </mat-form-field>
      <mat-form-field class="ms-2">
          <mat-label>Shipped Date</mat-label>
          <input matInput [matDatepicker]="shippedDatePicker" formControlName="ShippedDate" ngDefaultControl>
          <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
          <mat-datepicker-toggle matIconSuffix [for]="shippedDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #shippedDatePicker></mat-datepicker>
          <mat-error *ngIf="formulario.controls['ShippedDate'].invalid">
            La fecha del transportista es requerida.
          </mat-error>
      </mat-form-field>
  </div>
  <div>
      <mat-form-field appearance="fill" class="col-md-7">
        <mat-label>Freight</mat-label>
        <input matInput formControlName="Freight" ngDefaultControl type="number">
        <mat-error *ngIf="formulario.controls['Freight'].invalid">
          El transporte es requerido.
        </mat-error>
      </mat-form-field>
  </div>
  <hr>
  <div>
      <h4>Order Details</h4>
  </div>
  <div>
      <mat-form-field appearance="fill" class="col-md-7">
        <mat-label>Product</mat-label>
        <mat-select formControlName="ProductId" ngDefaultControl>
          @for (pro of productos; track pro) {
            <mat-option [value]="pro.productid">{{pro.productname}}</mat-option>
          }
        </mat-select>
        <mat-error *ngIf="formulario.controls['ProductId'].invalid">
          El producto es requerido.
        </mat-error>
      </mat-form-field>
  </div>
  <div>
      <mat-form-field appearance="fill" class="me-2">
        <mat-label>Unit Price</mat-label>
        <input matInput formControlName="UnitPrice" ngDefaultControl type="number">
        <mat-error *ngIf="formulario.controls['UnitPrice'].invalid">
          El precio es requerido.
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="mx-2">
        <mat-label>Quantity</mat-label>
        <input matInput formControlName="Qty" ngDefaultControl type="number">
        <mat-error *ngIf="formulario.controls['Qty'].invalid">
          La cantidad es requerida
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="ms-2">
        <mat-label>Discount</mat-label>
        <input matInput formControlName="Discount" ngDefaultControl type="number" max="1" step="1">
        <mat-error *ngIf="formulario.controls['Discount'].invalid">
          El descuento es requerido y menor que 1.
        </mat-error>
      </mat-form-field>
  </div>
  <div>
    <button mat-raised-button color="primary" type="submit" [disabled]="!formulario.valid">
      Enviar
    </button>
  </div>
</form>